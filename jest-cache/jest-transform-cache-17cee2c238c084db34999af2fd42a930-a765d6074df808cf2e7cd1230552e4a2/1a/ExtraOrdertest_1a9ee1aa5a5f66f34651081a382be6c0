d4fa98496120205d21131fd72d4105dd
"use strict";

_getJestObj().mock('Api/orders.service', function () {
  return {
    take: jest.fn()
  };
});

_getJestObj().mock('react-redux', function () {
  return {
    useDispatch: jest.fn(),
    useSelector: jest.fn(),
    useHistory: function useHistory() {
      return {
        push: jest.fn()
      };
    }
  };
});

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _react = _interopRequireDefault(require("react"));

var _faker = _interopRequireDefault(require("faker"));

var _react2 = require("@testing-library/react");

var _reactRedux = require("react-redux");

var _orders = _interopRequireDefault(require("Api/orders.service"));

var _OrdersList = _interopRequireDefault(require("Components/OrdersList"));

var _OrderCard = _interopRequireDefault(require("Components/OrderCard"));

var _ViewOrderModal = _interopRequireDefault(require("Components/Modals/ViewOrderModal"));

var _SuccessModal = _interopRequireDefault(require("Components/Modals/SuccessModal"));

function _getJestObj() {
  var _require = require("@jest/globals"),
      jest = _require.jest;

  _getJestObj = function _getJestObj() {
    return jest;
  };

  return jest;
}

describe('Extra order', function () {
  test('Take order', /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
    var props, setLoading, _render, getByText, getAllByText;

    return _regenerator["default"].wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            props = {
              orders: [{
                id: _faker["default"].random.number(),
                description: _faker["default"].lorem.paragraph(),
                title: _faker["default"].random.words(),
                helpee: _faker["default"].internet.userName(),
                categories: [{
                  label: 'Supermercado'
                }]
              }]
            };

            _orders["default"].take.mockImplementation(function () {
              return {
                status: 200
              };
            });

            setLoading = jest.fn();
            _render = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_OrdersList["default"], {
              orders: props.orders,
              setLoading: setLoading
            })), getByText = _render.getByText, getAllByText = _render.getAllByText;

            _react2.fireEvent.click(getByText(/Ver más/i));

            _context.next = 7;
            return _react2.fireEvent.click(getByText(/Postularse/i));

          case 7:
            _context.next = 9;
            return (0, _react2.waitFor)(function () {
              expect(_orders["default"].take).toHaveBeenCalledTimes(1);
            });

          case 9:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  })));
  test('Take order', /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
    var props, setLoading, _render2, getByText, getAllByText;

    return _regenerator["default"].wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            props = {
              orders: [{
                id: _faker["default"].random.number(),
                description: _faker["default"].lorem.paragraph(),
                title: _faker["default"].random.words(),
                helpee: _faker["default"].internet.userName(),
                categories: [{
                  label: 'Supermercado'
                }]
              }]
            };

            _orders["default"].take.mockImplementation(function () {
              throw new Error('error');
            });

            setLoading = jest.fn();
            _render2 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_OrdersList["default"], {
              orders: props.orders,
              setLoading: setLoading
            })), getByText = _render2.getByText, getAllByText = _render2.getAllByText;

            _react2.fireEvent.click(getByText(/Ver más/i));

            _context2.next = 7;
            return _react2.fireEvent.click(getAllByText(/Postularse/i)[1]);

          case 7:
            _context2.next = 9;
            return (0, _react2.waitFor)(function () {
              expect(/Hubo un error./i).toBeInTheDocument();
            });

          case 9:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  })));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkV4dHJhT3JkZXIudGVzdC5qcyJdLCJuYW1lcyI6WyJtb2NrIiwidGFrZSIsImplc3QiLCJmbiIsInVzZURpc3BhdGNoIiwidXNlU2VsZWN0b3IiLCJ1c2VIaXN0b3J5IiwicHVzaCIsImRlc2NyaWJlIiwidGVzdCIsInByb3BzIiwib3JkZXJzIiwiaWQiLCJmYWtlciIsInJhbmRvbSIsIm51bWJlciIsImRlc2NyaXB0aW9uIiwibG9yZW0iLCJwYXJhZ3JhcGgiLCJ0aXRsZSIsIndvcmRzIiwiaGVscGVlIiwiaW50ZXJuZXQiLCJ1c2VyTmFtZSIsImNhdGVnb3JpZXMiLCJsYWJlbCIsIm9yZGVyc1NlcnZpY2UiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJzdGF0dXMiLCJzZXRMb2FkaW5nIiwiZ2V0QnlUZXh0IiwiZ2V0QWxsQnlUZXh0IiwiZmlyZUV2ZW50IiwiY2xpY2siLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJFcnJvciIsInRvQmVJblRoZURvY3VtZW50Il0sIm1hcHBpbmdzIjoiOztBQWtCQSxjQUFLQSxJQUFMLENBQVUsb0JBQVYsRUFBZ0M7QUFBQSxTQUFPO0FBQ3JDQyxJQUFBQSxJQUFJLEVBQUVDLElBQUksQ0FBQ0MsRUFBTDtBQUQrQixHQUFQO0FBQUEsQ0FBaEM7O0FBUkEsY0FBS0gsSUFBTCxDQUFVLGFBQVYsRUFBeUI7QUFBQSxTQUFPO0FBQzlCSSxJQUFBQSxXQUFXLEVBQUVGLElBQUksQ0FBQ0MsRUFBTCxFQURpQjtBQUU5QkUsSUFBQUEsV0FBVyxFQUFFSCxJQUFJLENBQUNDLEVBQUwsRUFGaUI7QUFHOUJHLElBQUFBLFVBQVUsRUFBRTtBQUFBLGFBQU87QUFDakJDLFFBQUFBLElBQUksRUFBRUwsSUFBSSxDQUFDQyxFQUFMO0FBRFcsT0FBUDtBQUFBO0FBSGtCLEdBQVA7QUFBQSxDQUF6Qjs7Ozs7Ozs7QUFWQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7Ozs7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QUQsQ0FBWixDQUE0QixDQUE1QixDQUFoQixDQWhCVzs7QUFBQTtBQUFBO0FBQUEsbUJBaUJYLHFCQUFRLFlBQU07QUFDbEJHLGNBQUFBLE1BQU0sQ0FBQyxpQkFBRCxDQUFOLENBQTBCRyxpQkFBMUI7QUFDRCxhQUZLLENBakJXOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEdBQWYsR0FBSjtBQXFCRCxDQTNDTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBmYWtlciBmcm9tICdmYWtlcic7XG5pbXBvcnQgeyBmaXJlRXZlbnQsIHJlbmRlciwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgb3JkZXJzU2VydmljZSBmcm9tICdBcGkvb3JkZXJzLnNlcnZpY2UnO1xuaW1wb3J0IE9yZGVycyBmcm9tICdDb21wb25lbnRzL09yZGVyc0xpc3QnO1xuaW1wb3J0IE9yZGVyIGZyb20gJ0NvbXBvbmVudHMvT3JkZXJDYXJkJztcbmltcG9ydCBWaWV3T3JkZXJNb2RhbCBmcm9tICdDb21wb25lbnRzL01vZGFscy9WaWV3T3JkZXJNb2RhbCc7XG5pbXBvcnQgU3VjY2Vzc01vZGFsIGZyb20gJ0NvbXBvbmVudHMvTW9kYWxzL1N1Y2Nlc3NNb2RhbCc7XG5cbmplc3QubW9jaygncmVhY3QtcmVkdXgnLCAoKSA9PiAoe1xuICB1c2VEaXNwYXRjaDogamVzdC5mbigpLFxuICB1c2VTZWxlY3RvcjogamVzdC5mbigpLFxuICB1c2VIaXN0b3J5OiAoKSA9PiAoe1xuICAgIHB1c2g6IGplc3QuZm4oKSxcbiAgfSksXG59KSk7XG5cbmplc3QubW9jaygnQXBpL29yZGVycy5zZXJ2aWNlJywgKCkgPT4gKHtcbiAgdGFrZTogamVzdC5mbigpLFxufSkpO1xuXG5kZXNjcmliZSgnRXh0cmEgb3JkZXInLCAoKSA9PiB7XG4gIHRlc3QoJ1Rha2Ugb3JkZXInLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICBvcmRlcnM6IFt7XG4gICAgICAgIGlkOiBmYWtlci5yYW5kb20ubnVtYmVyKCksXG4gICAgICAgIGRlc2NyaXB0aW9uOiBmYWtlci5sb3JlbS5wYXJhZ3JhcGgoKSxcbiAgICAgICAgdGl0bGU6IGZha2VyLnJhbmRvbS53b3JkcygpLFxuICAgICAgICBoZWxwZWU6IGZha2VyLmludGVybmV0LnVzZXJOYW1lKCksXG4gICAgICAgIGNhdGVnb3JpZXM6IFt7XG4gICAgICAgICAgbGFiZWw6ICdTdXBlcm1lcmNhZG8nLFxuICAgICAgICB9XSxcbiAgICAgIH1dLFxuICAgIH07XG4gICAgb3JkZXJzU2VydmljZS50YWtlLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoeyBzdGF0dXM6IDIwMCB9KSk7XG4gICAgY29uc3Qgc2V0TG9hZGluZyA9IGplc3QuZm4oKTtcbiAgICBjb25zdCB7IGdldEJ5VGV4dCwgZ2V0QWxsQnlUZXh0IH0gPSByZW5kZXIoPE9yZGVycyBvcmRlcnM9e3Byb3BzLm9yZGVyc30gc2V0TG9hZGluZz17c2V0TG9hZGluZ30gLz4pO1xuICAgIGZpcmVFdmVudC5jbGljayhnZXRCeVRleHQoL1ZlciBtw6FzL2kpKTtcbiAgICBhd2FpdCBmaXJlRXZlbnQuY2xpY2soZ2V0QnlUZXh0KC9Qb3N0dWxhcnNlL2kpKTtcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChvcmRlcnNTZXJ2aWNlLnRha2UpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9KTtcbiAgfSk7XG4gIHRlc3QoJ1Rha2Ugb3JkZXInLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICBvcmRlcnM6IFt7XG4gICAgICAgIGlkOiBmYWtlci5yYW5kb20ubnVtYmVyKCksXG4gICAgICAgIGRlc2NyaXB0aW9uOiBmYWtlci5sb3JlbS5wYXJhZ3JhcGgoKSxcbiAgICAgICAgdGl0bGU6IGZha2VyLnJhbmRvbS53b3JkcygpLFxuICAgICAgICBoZWxwZWU6IGZha2VyLmludGVybmV0LnVzZXJOYW1lKCksXG4gICAgICAgIGNhdGVnb3JpZXM6IFt7XG4gICAgICAgICAgbGFiZWw6ICdTdXBlcm1lcmNhZG8nLFxuICAgICAgICB9XSxcbiAgICAgIH1dLFxuICAgIH07XG4gICAgb3JkZXJzU2VydmljZS50YWtlLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7IHRocm93IG5ldyBFcnJvcignZXJyb3InKTsgfSk7XG4gICAgY29uc3Qgc2V0TG9hZGluZyA9IGplc3QuZm4oKTtcbiAgICBjb25zdCB7IGdldEJ5VGV4dCwgZ2V0QWxsQnlUZXh0IH0gPSByZW5kZXIoPE9yZGVycyBvcmRlcnM9e3Byb3BzLm9yZGVyc30gc2V0TG9hZGluZz17c2V0TG9hZGluZ30gLz4pO1xuICAgIGZpcmVFdmVudC5jbGljayhnZXRCeVRleHQoL1ZlciBtw6FzL2kpKTtcbiAgICBhd2FpdCBmaXJlRXZlbnQuY2xpY2soZ2V0QWxsQnlUZXh0KC9Qb3N0dWxhcnNlL2kpWzFdKTtcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdCgvSHVibyB1biBlcnJvci4vaSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==