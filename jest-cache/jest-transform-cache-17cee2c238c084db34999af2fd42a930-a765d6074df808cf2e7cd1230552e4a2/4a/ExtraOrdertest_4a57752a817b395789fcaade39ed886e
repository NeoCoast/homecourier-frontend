fa243f19ca080b84ebdf4400a51d1785
"use strict";

_getJestObj().mock('Api/orders.service', function () {
  return {
    take: jest.fn()
  };
});

_getJestObj().mock('react-redux', function () {
  return {
    useDispatch: jest.fn(),
    useSelector: jest.fn(),
    useHistory: function useHistory() {
      return {
        push: jest.fn()
      };
    }
  };
});

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _react = _interopRequireDefault(require("react"));

var _faker = _interopRequireDefault(require("faker"));

var _react2 = require("@testing-library/react");

var _reactRedux = require("react-redux");

var _orders = _interopRequireDefault(require("Api/orders.service"));

var _OrdersList = _interopRequireDefault(require("Components/OrdersList"));

var _OrderCard = _interopRequireDefault(require("Components/OrderCard"));

var _ViewOrderModal = _interopRequireDefault(require("Components/Modals/ViewOrderModal"));

var _SuccessModal = _interopRequireDefault(require("Components/Modals/SuccessModal"));

function _getJestObj() {
  var _require = require("@jest/globals"),
      jest = _require.jest;

  _getJestObj = function _getJestObj() {
    return jest;
  };

  return jest;
}

describe('Extra order', function () {
  test('Take order', /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
    var props, setLoading, _render, getByText, getAllByText;

    return _regenerator["default"].wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            props = {
              orders: [{
                id: _faker["default"].random.number(),
                description: _faker["default"].lorem.paragraph(),
                title: _faker["default"].random.words(),
                helpee: _faker["default"].internet.userName(),
                categories: [{
                  label: 'Supermercado'
                }]
              }]
            };

            _orders["default"].take.mockImplementation(function () {
              return {
                status: 200
              };
            });

            setLoading = jest.fn();
            _render = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_OrdersList["default"], {
              orders: props.orders,
              setLoading: setLoading
            })), getByText = _render.getByText, getAllByText = _render.getAllByText;

            _react2.fireEvent.click(getByText(/Ver más/i));

            _context.next = 7;
            return _react2.fireEvent.click(getByText(/Postularse/i));

          case 7:
            _context.next = 9;
            return (0, _react2.waitFor)(function () {
              expect(_orders["default"].take).toHaveBeenCalledTimes(1);
            });

          case 9:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  })));
  test('Take order', /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
    var props, setLoading, _render2, getByText, getAllByText;

    return _regenerator["default"].wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            props = {
              orders: [{
                id: _faker["default"].random.number(),
                description: _faker["default"].lorem.paragraph(),
                title: _faker["default"].random.words(),
                helpee: _faker["default"].internet.userName(),
                categories: [{
                  label: 'Supermercado'
                }]
              }]
            };

            _orders["default"].take.mockImplementation(function () {
              throw new Error('error');
            });

            setLoading = jest.fn();
            _render2 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_OrdersList["default"], {
              orders: props.orders,
              setLoading: setLoading
            })), getByText = _render2.getByText, getAllByText = _render2.getAllByText;

            _react2.fireEvent.click(getByText(/Ver más/i));

            _context2.next = 7;
            return _react2.fireEvent.click(getAllByText(/Postularse/i)[1]);

          case 7:
            _context2.next = 9;
            return (0, _react2.waitFor)(function () {
              expect(getByText(/Hubo un error./i)).toBeInTheDocument();
            });

          case 9:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  })));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkV4dHJhT3JkZXIudGVzdC5qcyJdLCJuYW1lcyI6WyJtb2NrIiwidGFrZSIsImplc3QiLCJmbiIsInVzZURpc3BhdGNoIiwidXNlU2VsZWN0b3IiLCJ1c2VIaXN0b3J5IiwicHVzaCIsImRlc2NyaWJlIiwidGVzdCIsInByb3BzIiwib3JkZXJzIiwiaWQiLCJmYWtlciIsInJhbmRvbSIsIm51bWJlciIsImRlc2NyaXB0aW9uIiwibG9yZW0iLCJwYXJhZ3JhcGgiLCJ0aXRsZSIsIndvcmRzIiwiaGVscGVlIiwiaW50ZXJuZXQiLCJ1c2VyTmFtZSIsImNhdGVnb3JpZXMiLCJsYWJlbCIsIm9yZGVyc1NlcnZpY2UiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJzdGF0dXMiLCJzZXRMb2FkaW5nIiwiZ2V0QnlUZXh0IiwiZ2V0QWxsQnlUZXh0IiwiZmlyZUV2ZW50IiwiY2xpY2siLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJFcnJvciIsInRvQmVJblRoZURvY3VtZW50Il0sIm1hcHBpbmdzIjoiOztBQWtCQSxjQUFLQSxJQUFMLENBQVUsb0JBQVYsRUFBZ0M7QUFBQSxTQUFPO0FBQ3JDQyxJQUFBQSxJQUFJLEVBQUVDLElBQUksQ0FBQ0MsRUFBTDtBQUQrQixHQUFQO0FBQUEsQ0FBaEM7O0FBUkEsY0FBS0gsSUFBTCxDQUFVLGFBQVYsRUFBeUI7QUFBQSxTQUFPO0FBQzlCSSxJQUFBQSxXQUFXLEVBQUVGLElBQUksQ0FBQ0MsRUFBTCxFQURpQjtBQUU5QkUsSUFBQUEsV0FBVyxFQUFFSCxJQUFJLENBQUNDLEVBQUwsRUFGaUI7QUFHOUJHLElBQUFBLFVBQVUsRUFBRTtBQUFBLGFBQU87QUFDakJDLFFBQUFBLElBQUksRUFBRUwsSUFBSSxDQUFDQyxFQUFMO0FBRFcsT0FBUDtBQUFBO0FBSGtCLEdBQVA7QUFBQSxDQUF6Qjs7Ozs7Ozs7QUFWQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7Ozs7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QUQsQ0FBWixDQUE0QixDQUE1QixDQUFoQixDQWhCVzs7QUFBQTtBQUFBO0FBQUEsbUJBaUJYLHFCQUFRLFlBQU07QUFDbEJHLGNBQUFBLE1BQU0sQ0FBQ0osU0FBUyxDQUFDLGlCQUFELENBQVYsQ0FBTixDQUFxQ08saUJBQXJDO0FBQ0QsYUFGSyxDQWpCVzs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHQUFmLEdBQUo7QUFxQkQsQ0EzQ08sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZmFrZXIgZnJvbSAnZmFrZXInO1xuaW1wb3J0IHsgZmlyZUV2ZW50LCByZW5kZXIsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IG9yZGVyc1NlcnZpY2UgZnJvbSAnQXBpL29yZGVycy5zZXJ2aWNlJztcbmltcG9ydCBPcmRlcnMgZnJvbSAnQ29tcG9uZW50cy9PcmRlcnNMaXN0JztcbmltcG9ydCBPcmRlciBmcm9tICdDb21wb25lbnRzL09yZGVyQ2FyZCc7XG5pbXBvcnQgVmlld09yZGVyTW9kYWwgZnJvbSAnQ29tcG9uZW50cy9Nb2RhbHMvVmlld09yZGVyTW9kYWwnO1xuaW1wb3J0IFN1Y2Nlc3NNb2RhbCBmcm9tICdDb21wb25lbnRzL01vZGFscy9TdWNjZXNzTW9kYWwnO1xuXG5qZXN0Lm1vY2soJ3JlYWN0LXJlZHV4JywgKCkgPT4gKHtcbiAgdXNlRGlzcGF0Y2g6IGplc3QuZm4oKSxcbiAgdXNlU2VsZWN0b3I6IGplc3QuZm4oKSxcbiAgdXNlSGlzdG9yeTogKCkgPT4gKHtcbiAgICBwdXNoOiBqZXN0LmZuKCksXG4gIH0pLFxufSkpO1xuXG5qZXN0Lm1vY2soJ0FwaS9vcmRlcnMuc2VydmljZScsICgpID0+ICh7XG4gIHRha2U6IGplc3QuZm4oKSxcbn0pKTtcblxuZGVzY3JpYmUoJ0V4dHJhIG9yZGVyJywgKCkgPT4ge1xuICB0ZXN0KCdUYWtlIG9yZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgb3JkZXJzOiBbe1xuICAgICAgICBpZDogZmFrZXIucmFuZG9tLm51bWJlcigpLFxuICAgICAgICBkZXNjcmlwdGlvbjogZmFrZXIubG9yZW0ucGFyYWdyYXBoKCksXG4gICAgICAgIHRpdGxlOiBmYWtlci5yYW5kb20ud29yZHMoKSxcbiAgICAgICAgaGVscGVlOiBmYWtlci5pbnRlcm5ldC51c2VyTmFtZSgpLFxuICAgICAgICBjYXRlZ29yaWVzOiBbe1xuICAgICAgICAgIGxhYmVsOiAnU3VwZXJtZXJjYWRvJyxcbiAgICAgICAgfV0sXG4gICAgICB9XSxcbiAgICB9O1xuICAgIG9yZGVyc1NlcnZpY2UudGFrZS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHsgc3RhdHVzOiAyMDAgfSkpO1xuICAgIGNvbnN0IHNldExvYWRpbmcgPSBqZXN0LmZuKCk7XG4gICAgY29uc3QgeyBnZXRCeVRleHQsIGdldEFsbEJ5VGV4dCB9ID0gcmVuZGVyKDxPcmRlcnMgb3JkZXJzPXtwcm9wcy5vcmRlcnN9IHNldExvYWRpbmc9e3NldExvYWRpbmd9IC8+KTtcbiAgICBmaXJlRXZlbnQuY2xpY2soZ2V0QnlUZXh0KC9WZXIgbcOhcy9pKSk7XG4gICAgYXdhaXQgZmlyZUV2ZW50LmNsaWNrKGdldEJ5VGV4dCgvUG9zdHVsYXJzZS9pKSk7XG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qob3JkZXJzU2VydmljZS50YWtlKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgfSk7XG4gIH0pO1xuICB0ZXN0KCdUYWtlIG9yZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgb3JkZXJzOiBbe1xuICAgICAgICBpZDogZmFrZXIucmFuZG9tLm51bWJlcigpLFxuICAgICAgICBkZXNjcmlwdGlvbjogZmFrZXIubG9yZW0ucGFyYWdyYXBoKCksXG4gICAgICAgIHRpdGxlOiBmYWtlci5yYW5kb20ud29yZHMoKSxcbiAgICAgICAgaGVscGVlOiBmYWtlci5pbnRlcm5ldC51c2VyTmFtZSgpLFxuICAgICAgICBjYXRlZ29yaWVzOiBbe1xuICAgICAgICAgIGxhYmVsOiAnU3VwZXJtZXJjYWRvJyxcbiAgICAgICAgfV0sXG4gICAgICB9XSxcbiAgICB9O1xuICAgIG9yZGVyc1NlcnZpY2UudGFrZS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoJ2Vycm9yJyk7IH0pO1xuICAgIGNvbnN0IHNldExvYWRpbmcgPSBqZXN0LmZuKCk7XG4gICAgY29uc3QgeyBnZXRCeVRleHQsIGdldEFsbEJ5VGV4dCB9ID0gcmVuZGVyKDxPcmRlcnMgb3JkZXJzPXtwcm9wcy5vcmRlcnN9IHNldExvYWRpbmc9e3NldExvYWRpbmd9IC8+KTtcbiAgICBmaXJlRXZlbnQuY2xpY2soZ2V0QnlUZXh0KC9WZXIgbcOhcy9pKSk7XG4gICAgYXdhaXQgZmlyZUV2ZW50LmNsaWNrKGdldEFsbEJ5VGV4dCgvUG9zdHVsYXJzZS9pKVsxXSk7XG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QoZ2V0QnlUZXh0KC9IdWJvIHVuIGVycm9yLi9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==