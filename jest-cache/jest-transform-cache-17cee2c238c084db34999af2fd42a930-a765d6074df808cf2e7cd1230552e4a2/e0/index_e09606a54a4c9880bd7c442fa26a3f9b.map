{"version":3,"sources":["index.jsx"],"names":["NotificationMenu","dispatch","useDispatch","notis","useSelector","state","userNotifications","notifications","notiRef","useRef","useState","openDrop","setOpenDrop","viewHistory","setViewHistory","notificationHistory","setNotificationHistory","pageNumber","setPageNumber","loading","setLoading","notSeenNotifications","filter","x","status","seenNotifications","getNotifications","page","notificationsService","res","notisId","map","id","resWithoutNew","data","includes","openHistory","closeHistory","setSeen","JSON","parse","stringify","seenNotis","seenNotisId","item","setSeenNotifications","response","loadAll","console","error","openNotiDrop","closeNotiDrop","listChildren","minHeight","height","width","fontWeight","title","body","cursor","horizontal","length","top","right","current","minWidth","bottom"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;;AAGA;AAAA;AAAA;;AACA;AAAA;AAAA;;AACA;AAAA;AAAA;;AACA;AAAA;AAAA;;AACA;AAAA;AAAA;;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","sourcesContent":["import {\n  Box, Stack, Text, Drop, List, Heading, Anchor,\n} from 'grommet';\nimport { Notification } from 'grommet-icons';\nimport { useDispatch, useSelector } from 'react-redux';\nimport React, { useRef, useState } from 'react';\nimport notificationsService from 'Api/notifications.service';\nimport { RingLoader } from 'react-spinners';\nimport { loadAll } from 'Actions/userNotifications';\n\nconst NotificationMenu = () => {\n  const dispatch = useDispatch();\n  const notis = useSelector((state) => state.userNotifications.notifications);\n  const notiRef = useRef();\n  const [openDrop, setOpenDrop] = useState(false);\n  const [viewHistory, setViewHistory] = useState(false);\n  const [notificationHistory, setNotificationHistory] = useState([]);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [loading, setLoading] = useState(false);\n\n  const notSeenNotifications = notis.filter((x) => x.status === 'not_seen');\n  const seenNotifications = notis.filter((x) => x.status === 'seen');\n\n  const getNotifications = async (page = 0) => {\n    const res = await notificationsService.getNotifications(page);\n    const notisId = notis.map((x) => x.id);\n    const resWithoutNew = res.data.notifications.filter((x) => !notisId.includes(x.id));\n    setNotificationHistory([...notificationHistory, ...resWithoutNew]);\n    setLoading(false);\n  };\n\n  const openHistory = async () => {\n    setLoading(true);\n    await getNotifications();\n    setViewHistory(true);\n  };\n\n  const closeHistory = async () => {\n    setPageNumber(1);\n    setViewHistory(false);\n    setNotificationHistory([]);\n  };\n\n  const setSeen = async () => {\n    const notifications = JSON.parse(JSON.stringify(notis));\n    const seenNotis = [...notifications.filter((x) => x.status === 'not_seen')];\n    const seenNotisId = seenNotis.map((x) => x.id);\n    notifications.map((x) => {\n      const item = x;\n      item.status = 'seen';\n      return item;\n    });\n    try {\n      const response = await notificationsService.setSeenNotifications(seenNotisId);\n      if (response.status === 200) await dispatch(loadAll(notifications));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const openNotiDrop = () => {\n    setOpenDrop(true);\n  };\n\n  const closeNotiDrop = () => {\n    setOpenDrop(false);\n    setSeen();\n  };\n\n  const listChildren = (item) => (\n    <Box direction=\"row\" justify=\"between\" fill=\"horizontal\" align=\"center\" gap=\"small\" style={{ minHeight: '50px' }} key={item.id}>\n      {item.status === 'not_seen' && <Box round background=\"brand\" style={{ height: '10px', width: '10px' }} id=\"new-box\"></Box>}\n      <Box>\n        <Text style={{ fontWeight: 'bold' }}>{item.id}:{item.title}</Text>\n        <Text>{item.body}</Text>\n      </Box>\n      <Text size=\"small\">Hace 5 min.</Text>\n    </Box>\n  );\n\n  return (\n    <Box pad=\"small\" justify=\"center\">\n\n      <Stack anchor=\"top-right\" fill onClick={openNotiDrop} style={{ cursor: 'pointer' }} id=\"noty-stack\">\n        <Notification size=\"30\" />\n        <Box\n          background=\"brand\"\n          pad={{ horizontal: 'xsmall' }}\n          round\n        >\n          <Text size=\"xsmall\">{notis.filter((x) => x.status === 'not_seen').length}</Text>\n        </Box>\n      </Stack>\n      <Box ref={notiRef}></Box>\n\n      {openDrop && (\n        <Drop\n          align={{ top: 'bottom', right: 'left' }}\n          target={notiRef.current}\n          onEsc={closeNotiDrop}\n          onClickOutside={closeNotiDrop}\n        >\n          <Box pad=\"small\" style={{ minWidth: '300px' }}>\n            <Heading level=\"4\" margin=\"none\">Notificaciones</Heading>\n            <Box border=\"bottom\" fill=\"horizontal\" margin={{ bottom: 'small' }}></Box>\n            <Heading level=\"5\" margin=\"none\">Nuevas</Heading>\n            {notSeenNotifications.length > 0\n            && (\n              <List\n                data={notSeenNotifications}\n              >\n                {listChildren}\n              </List>\n            )}\n            <Box border=\"bottom\" fill=\"horizontal\" margin={{ bottom: 'small' }}></Box>\n            {notSeenNotifications.length === 0 && <Text size=\"small\">No hay notificaciones para mostrar.</Text>}\n            {notSeenNotifications.length === 0 && <Box border=\"bottom\" fill=\"horizontal\" margin={{ bottom: 'small' }}></Box>}\n            <Heading level=\"5\" margin=\"none\">Vistas</Heading>\n            {seenNotifications.length > 0\n            && (\n              <List\n                data={seenNotifications}\n              >\n                {listChildren}\n              </List>\n            )}\n            {seenNotifications.length === 0 && <Box border=\"bottom\" fill=\"horizontal\" margin={{ bottom: 'small' }}></Box>}\n            {seenNotifications.length === 0 && <Text size=\"small\">No hay notificaciones para mostrar.</Text>}\n            <Box border=\"bottom\" fill=\"horizontal\" margin={{ bottom: 'small' }}></Box>\n            {!viewHistory && !loading && <Anchor onClick={() => openHistory()}>Ver todas</Anchor>}\n            { loading && <Box fill=\"horizontal\" justify=\"center\" align=\"center\"><RingLoader loading size={80} color=\"#54a3ff\" /></Box>}\n            { viewHistory\n            && (\n              <Box fill=\"horizontal\" margin={{ bottom: 'small' }} pad={{ top: 'small' }}>\n                <Box direction=\"row\" justify=\"between\">\n                  <Heading level=\"5\" margin=\"none\">Historico</Heading>\n                  <Anchor onClick={closeHistory}>Esconder</Anchor>\n                </Box>\n                <Box fill=\"horizontal\" overflow=\"auto\" height=\"50vh\">\n                  <List\n                    data={notificationHistory}\n                    onMore={() => {\n                      getNotifications(pageNumber);\n                      setPageNumber(pageNumber + 1);\n                    }}\n                  >\n                    {(item) => listChildren(item)}\n                  </List>\n                </Box>\n              </Box>\n            )}\n          </Box>\n        </Drop>\n      )}\n\n    </Box>\n  );\n};\n\nexport default NotificationMenu;\n"]}